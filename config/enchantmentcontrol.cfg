# Configuration file

general {
    # Each line is a group of mutually exclusive enchantments
    #   like Smite, Sharpness and BoA
    # Can be auto filled using "First Setup.Print Default Incompatibilities"
    # Warning: this mod takes full control of enchantments incompatibilities with each other
    #   so run the first setup every time you add mods that have enchants, then compare with what you set up to stay up to date
    S:"Incompatible Groups" <
     >

    ##########################################################################################################
    # first setup
    #--------------------------------------------------------------------------------------------------------#
    # If you're a modpack dev just starting to set up this mod, you probably want to start here.
    ##########################################################################################################

    "first setup" {
        # Enable if you want to remap enchantment ids. Warning: See Warning in "Enchantment Id Remaps"
        B:"(MixinToggle) Enable Registry Remapping"=false

        # !Disables itself after a one time use!
        # 
        # If enabled, during startup this mod will check all present incompatibilities between enchantments and print them out into the "Incompatible Enchantment Groups" config.
        # Config will look correct after restart.
        # This is done because this mod fully overwrites enchantment incompatibility, so this step should be re-done every time a new mod with enchantments is added to a modpack, to keep its inherent incompats.
        # 
        # WARNING: this will overwrite your current "Incompatible Groups" setup on restart!
        B:"Print Default Incompatibilities"=true

        # !Disables itself after a one time use!
        # 
        # If enabled, during startup this mod will check what items every enchant allows using their type and print the result out into the two "Item Types" configs.
        # Config will look correct after restart.
        # This mod overrides the default type system, so removing an enchant from the "Item Types" lists will actually disallow it, except if there is allowed custom overriding code interfering.
        # Note: this system tries to be intelligent and helpful and infers a bit more info than it needs to (example: anvil section could be empty as that's all fully custom behavior, so removing these entries wont do anything).
        # It is not able to find and translate every single modded behavior, and might even mistranslate rare modded application rules.
        # So if you want full control ("Allow Modded Enchantment Behaviors .." = false) you will have to figure out those rules and translate them to custom item types yourself.
        # This step should be re-done every time a new mod with enchantments is added to a modpack, to keep its inherent types.
        # 
        # WARNING: enabling this will overwrite your current "Item Types" setup on restart!
        B:"Print Default Item Types"=true

        # !Disables itself after a one time use!
        # 
        # If enabled, during startup this mod will infer info about all registered enchantments and print them out in /config/enchantmentcontrol/inferred-inactive/.
        # The created json files can be used as blueprints from which to work off of.
        # To do so, copy everything to /config/enchantmentcontrol/enchantments/, then delete every file + line in file that should stay default/untouched.
        # DEBUG: These can also be used to check if the changes you apply to the enchantments are actually applied, which would reflect in the inferred files (except "types")
        # WARNING: All files in /inferred-inactive/ will be overwritten every time you start the game with this option enabled
        B:"Print Inferred Enchantment Infos"=true

        # Advanced
        # 
        # When inferring cfg jsons from existing enchants, enabling this will also infer info that is usually not interesting or otherwise problematic to modify.
        # This will additionally give info for
        #  - type - the rigid base type (EnumEnchantmentType) to check if the enchant can go on an item. Modifying this in tandem with the config lists isn't advised
        #  - slots - rarely used system in what slot an enchant has to be in to be used
        #  - minLvl - basically always 1
        #  - doublePrice - to modify librarian price doubling independent of treasure property
        #  - enchantability - to modify at which lvl which enchant is available on enchanting table and connected systems
        #  - isAllowedOnBooks - a vanilla property, only used specifically when enchanting books with lvls, where those disallowed will never be rolled
        # Every option that is not existing in a json will keep the enchantment unmodified there, so reduction is advised.
        B:"Print Inferred Expanded"=false

        ##########################################################################################################
        # enchantment id remaps
        #--------------------------------------------------------------------------------------------------------#
        # If you really dont like one mods enchantment id (modid:enchid), you can add it here with a second entry of what you want to call it instead (modid:enchid). 
        # WARNING: this will cause permanent id remapping issues for old worlds! Only do this for new worlds or before you release a modpack, if you really need to!
        # pattern: S:"modid:oldenchid"=modid:newenchid
        # Has Mixin Toggle "Enable Registry Remapping"
        ##########################################################################################################

        "enchantment id remaps" {
        }

    }

    ##########################################################################################################
    # rarities
    #--------------------------------------------------------------------------------------------------------#
    # Override vanilla rarity weights (COMMON = 10, UNCOMMON = 5, RARE = 2, VERY_RARE = 1)
    # or define your own rarities with their own weights here.
    # Pattern: I:YOUR_RARITY_NAME=weight
    # Example:
    #   I:COMMON=20
    #   I:UNCOMMON=10
    #   I:RARE=4
    #   I:VERY_RARE=2
    #   I:LEGENDARY=1
    ##########################################################################################################

    rarities {
    }

    ##########################################################################################################
    # blacklists
    #--------------------------------------------------------------------------------------------------------#
    # Option to blacklist enchants to appear from various sources (or entirely)
    ##########################################################################################################

    blacklists {
        # Enchanting table will not be able to generate enchantments in this list
        S:"Enchanting Table Blacklist" <
         >

        # Enchantment Table blacklist will be treated as a Whitelist
        B:"Enchantment Table Whitelist Toggle"=false

        # Loot enchanted with levels (enchant_with_levels) will not be able to generate enchantments in this list
        S:"Level Enchantment Blacklist" <
         >

        # Level Enchantment blacklist will be treated as a Whitelist
        B:"Level Enchantment Whitelist Toggle"=false

        # Librarians will not be able to generate enchantments in this list
        S:"Librarian Enchantment Blacklist" <
         >

        # Enchantment blacklist will be treated as a Whitelist
        B:"Librarian Enchantment Whitelist Toggle"=false

        # Fully random books (enchant_randomly) will not be able to generate enchantments in this list
        S:"Random Enchantment Blacklist" <
         >

        # Random Enchantment blacklist will be treated as a Whitelist
        B:"Random Enchantment Whitelist Toggle"=false

        # Enchants in this list will be prevented from being registered in the game. There will be no way to access them at all.
        S:"Registered Enchantment Blacklist" <
         >
    }

    ##########################################################################################################
    # item types
    #--------------------------------------------------------------------------------------------------------#
    # What enchantment goes on which item?
    ##########################################################################################################

    "item types" {
        # Some modded items only pretend to be a specific item type without actually being them (wolf armor being SWORD and ARMOR_FEET, better survival items being SWORD etc).
        # Enabling this toggle will make the given item type match those too.
        # Disabling will instead only look at the actual checks of each EnumEnchantmentType (like SWORD = has to be instanceof ItemSword) to match.
        # It is closer to an unmodified experience if you keep this enabled. Disable it if you want full control over what enchants go on which items using custom types.
        B:"Allow Modded Item Behaviors"=true

        # Enchantments are allowed on items using matchers. Define custom matchers here.
        # Pattern: MatcherName, Type, Arguments
        # Available Types with Arguments:
        #   modid, somemodid
        #   regex, someregex
        #   items, mymod:mysword
        #   items, minecraft:iron_sword, mymod:mysword, ...
        #   class, some.org.somemodid.item.ItemSpecialSword
        #   enum (no arguments)
        # Where 
        # - class will search the given class in the inheritance chain of the item class of the current item
        # - regex uses regular expressions and has to match the full modid:itemid
        # - enum uses an EnumEnchantmentType that another mod has created. This matchers name needs to match that enum name
        # - and items is an arbitrarily long list
        S:"Custom Item Types" <
         >

        ##########################################################################################################
        # general
        #--------------------------------------------------------------------------------------------------------#
        # Whenever enchantments are checked against items to possibly apply the enchantment, the rules in here are checked, to a modifiably varying degree.
        ##########################################################################################################

        general {
            # Some modded enchantments come with additional item applicability rules (example: SME Rune Revival on all BREAKABLE except ARMOR). 
            # For such enchantments, enabling this toggle will prioritise these additional rules before (and possibly instead of) checking against the types defined in "Item Types".
            # Disabling will instead only use the config "Item Types" to match.
            # It is closer to an unmodified experience if you keep this enabled. Disable it if you want full control over what enchants go on which items using custom types.
            # Note: prioritising custom behavior also means that inverted types (!TYPE) won't be able to re-disallow items that were only allowed by such custom behavior
            B:"Allow Modded Enchantment Behaviors"=true

            # Enchantments listed here will run against what is set in "Allow Modded Enchantment Behaviors":
            #  - If modded behaviors are generally allowed, enchants listed here will not have their modded behavior allowed
            #  - If modded behaviors are generally disallowed, enchants listed here will have their modded behavior be allowed anyway
            S:Blacklist <
             >

            # (Custom) Item Type name and a list of enchantments that can go on items with this type
            #  Pattern: TYPE = modid:enchid, modid:enchid2, ...
            #  You can also invert item type matches by adding a "!" in front of the type name (first character)
            #  This will disallow any item that matches the given matcher from using the given enchantments (except if allowed custom behavior gets priority and overrides)
            S:"Item Types" <
             >
        }

        ##########################################################################################################
        # anvil
        #--------------------------------------------------------------------------------------------------------#
        # This is a vanilla override thats called when an enchantment is applied to an item using 
        #  - the anvil
        #  - or the /enchant command
        # (java internal: canApply)
        # The behavior in here is usually added on top of the general behavior, if modded enchantments don't change that up (and they are allowed to)
        ##########################################################################################################

        anvil {
            # Same as "General.Allow Modded Enchantment Behaviors" but specifically for anvil and /enchant command.
            # Overriding the canApply method is pretty common for mods, so allowing this is a good idea..
            #  Even vanilla does it, to
            #  - allow Sharpness, Smite & BoA on Axes
            #  - and to allow Thorns on all armor pieces, not just Chestplate
            # Disable this only if you want total control, then only the "Anvil.Item Types" are used, on top of whatever behavior happens in General
            B:"Allow Modded Enchantment Behaviors"=true

            # Enchantments listed here will run against what is set in "Allow Modded Enchantment Behaviors":
            #  - If modded behaviors are generally allowed, enchants listed here will not have their modded behavior allowed
            #  - If modded behaviors are generally disallowed, enchants listed here will have their modded behavior be allowed anyway
            S:Blacklist <
             >

            # (Custom) Item Type name and a list of enchantments that can go on items with this type when using the anvil (and the /enchant command), additionally to the "General.Item Types"
            #  Any type name from "General.Item Types" and "Custom Item Types" can be used here too, including inverted(!) ones.
            S:"Item Types" <
             >
        }

    }

    ##########################################################################################################
    # creature attributes
    #--------------------------------------------------------------------------------------------------------#
    # Define custom creature attributes and how to match them to entities.
    # Pattern: S:MY_ATTR_NAME=type, string1, string2, string3, ...
    # Available types: 
    #   modid: only check modid(s) 
    #   mob: check against 1 or more mob registry names 
    #   class: check if given class is in java class hierarchy of the mob
    # Examples:
    #  S:LYCANITE=modid, lycanitesmobs
    #   S:DRAGON=mob, minecraft:ender_dragon, iceandfire:firedragon, iceandfire:icedragon
    #   S:ANIMAL=class, net.minecraft.entity.EntityAgeable
    ##########################################################################################################

    "creature attributes" {
    }

    ##########################################################################################################
    # debug
    #--------------------------------------------------------------------------------------------------------#
    # Debug Options
    ##########################################################################################################

    debug {
        # Enchantment classes that should not be modified at all by this mod. 
        # Use this if there are crashes when this mod tries to automatically modify some mods enchantments. 
        # You can find the class name in config/enchantmentcontrol/tmp/enchclasses.dump
        # Class names noted here need to look like net.minecraft.enchantment.EnchantmentDamage
        # Vanilla enchants will always be targeted, so putting their classes in here won't do anything
        S:"Blacklisted Enchantment Classes" <
         >

        # If enabled, using "Print Default Item Types" will also print all enchants that have custom behavior for general or anvil item application.
        #  Prints go to each blacklist. Will also automatically turn them into whitelists by untoggling "Allow Modded Behavior"
        # This option exists to make it easier for the few wanting full control over item types to see which enchantments have overriding behavior to account for
        B:"Print Item Type Blacklists"=false

        # If enabled, writes all currently loaded enchantment infos to /config/enchantmentcontrol/loaded/ during startup. Can be used to check if a given config json is actually loaded (and loaded correctly).
        B:"Print Loaded Enchantment Infos"=false
    }

    ##########################################################################################################
    # anvil mechanics
    #--------------------------------------------------------------------------------------------------------#
    # Options for Anvil Mechanics
    ##########################################################################################################

    "anvil mechanics" {
        # Main toggle for the Anvil Use Cost: Scaling Type, Combination Type and Scaling Factor in this config to be applicable
        B:"(MixinToggle) Change Cost Scaling"=false

        # Removes the "Too Expensive" system of anvils
        B:"(MixinToggle) Never Too Expensive"=false

        # If enabled, using the anvil on an item without modifying its enchantments (repair with item or material, renames) will not increase its anvil use cost
        B:"(MixinToggle) No Cost Increase On Repairs"=false

        # How the Anvil Use Cost of two items that are combined in the anvil get combined for the resulting item
        #   MAX: The default system. The resulting item will use the bigger anvil use cost of the two ingredient items (+1)
        #   SUM: Will add up the two items use cost (+1)
        #   AVERAGE: Will average the two items use cost (+1)
        #   MIN: Will take the smaller anvil use cost of the two ingredient items (+1). Probably not a great idea to use this one but who knows.
        # Note: This will also apply to the anvil use COUNT used to calc the anvil use COST
        # Valid values:
        # MIN
        # MAX
        # SUM
        # AVERAGE
        S:"Anvil Use Cost Combination Type"=MAX

        # Scaling factor "a" used in combination with the "Scaling Type" defined here.
        # Default is EXPONENTIAL with a factor of 2
        D:"Anvil Use Cost Scaling Factor"=2.0

        # How Anvil Use Cost ("RepairCost") scales with increased uses of the anvil
        # Available Types:
        #   EXPONENTIAL (a^n) - 1: Default system, possibly with modified scaling factor. Every use multiplies the current cost by the given factor (-1)
        #   QUADRATIC (a x nÂ²): Less steep increase on more uses. With a factor of 1 it's similar to exponential but doesn't go as crazy for higher uses
        #   LINEAR (a x n): Slow increase. Every use adds the given factor to the current cost.
        #   CONST (a): No increase. Items that have been used in the anvil previously will have a fixed additional cost of the given factor. Items never used in the anvil before will have no additional cost.
        # In all of those, a is the "Scaling Factor" defined here and n is the current use count
        # Personal suggestion to use QUADRATIC with factor 1. Extremely close to default for anvil uses of 0-5, noticeably less crazy increase for higher uses
        # Default: 0, 1, 3, 7, 15, 31, 63, 127, 255, 512, 1023
        # Suggested quadratic: 0, 1, 4, 9, 16, 25, 36, 49, 64, 81, 100
        # Valid values:
        # EXPONENTIAL
        # QUADRATIC
        # LINEAR
        # CONST
        S:"Anvil Use Cost Scaling Type"=EXPONENTIAL
    }

}


